
# ✅ PAT 乙级题目讲解：1003《我要通过！》

---

## 📌 题目简介

输入若干字符串，判断它们是否满足“PAT 判题系统”的合法构成规则。  
判断标准如下：

1. 字符串仅包含 `P`、`A`、`T` 三种字母；
2. 满足结构：形如 `xPATx`，其中 `x` 可以是空或只包含若干个 `A`；
3. 若 `aPbTc` 合法，则 `aPbATca` 也合法，其中 `a`、`b`、`c` 均为空或由 `A` 构成。

---

## 🧭 解题四步流程

### 1. 仔细读题 → **建模提取**

我们先从最基础合法形式 `PAT` 入手。  
此时我们可以将其拆分为：

- `a` = 空（即 `P` 前无 A）
- `b` = `"A"`（`P` 与 `T` 之间一个 A）
- `c` = 空（即 `T` 后无 A）

我们可以认为：
- `a` 的长度 = 0
- `b` 的长度 = 1
- `c` 的长度 = 0

观察此结构后，进一步拓展合法性规则：

#### 🧠 递推构造逻辑

从合法字符串 `aPbTc` 出发，构造 `aPbATca`：

- 原来中间有 `lenb` 个 A，构造后为 `lenb + 1`
- `a` 与 `c` 两端将同时增加长度 `len(a)` 与 `len(c)`

> 那么为了让构造后的字符串也合法，就必须保证：
> 
> `new_c = len(c) + len(a)`  
> `new_b = len(b) + 1`

根据这个递推模式可以得出：
```
len(c) = len(a) × len(b)
```

这就是合法字符串的数学判定条件。

---

### 2. 分析样例 → **模拟推导**

样例输入如下：

```
PAT         ✅  最简合法结构（lena=0, lenb=1, lenc=0）
PAAT        ✅  多一个 A 在 b 中（lenb=2）→ 满足 lena×lenb = lenc
AAPATAA     ✅  a=2, b=1, c=2 → 2×1=2
APAAATAA    ❌  a=1, b=3, c=2 → 1×3≠2，不合法
```

我们可以根据规律快速判断每个字符串的合法性。

---

### 3. 编写代码 → **结构表达**

```cpp
#include<bits/stdc++.h>
using namespace std;

int n;
string s;
int main(){
    cin >> n;
    while(n--){
        cin >> s;
        int len = s.size();
        bool f = 1;

        // 1. 仅包含 P A T
        int p, t, cp = 0, ct = 0;
        for(int i = 0; i < len; i++){
            if(s[i] != 'P' && s[i] != 'A' && s[i] != 'T'){
                f = 0;
                break;
            }
            if(s[i] == 'P'){ cp++; p = i; }
            if(s[i] == 'T'){ ct++; t = i; }
        }

        // 2. 检查 P T 唯一 且 P 在 T 前
        if(cp != 1 || ct != 1 || p >= t) f = 0;

        // 3. 数学关系 lena * lenb == lenc
        int lena = p;
        int lenb = t - p - 1;
        int lenc = len - t - 1;
        if(!lenb || lena * lenb != lenc) f = 0;

        if(f) cout << "YES";
        else cout << "NO";
        if(n > 0) cout << "\n";
    }
    return 0;
}
```

---

### 4. 测试检查 → **边界验证**

- 是否处理非法字符（如 `xPATx`）？
- 是否处理多个 P/T 的非法情况？
- 是否考虑 `lenb=0` 的非法情况？
- 特殊边界如 `APT`、`PT` 等要手动验证。

---

## ❗ 易错点整理

1. `P` 和 `T` 出现次数不是一次；
2. 忘记判断非法字符；
3. 没有满足 `lenb ≥ 1`；
4. 忽略了核心数学关系 `lena * lenb = lenc`。

---

## 🔍 总结：本题核心训练点

> **模型抽象 + 字符处理 + 数学约束验证**

- 结构识别能力：字符串模式的拆分与定位；
- 数学模型归纳：抽象为乘法关系；
- 字符串遍历与索引处理的细致性检验。
